<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

        <link rel="icon" type="image/png" href="pics/icon_small.png">

        <title>Model Repository</title>
        <link rel="stylesheet" type="text/css" href="js/ext/resources/css/ext-all-gray.css">
        <link rel="stylesheet" type="text/css" href="css/Processeditor.css">
        <script language="JavaScript" src="js/ext/bootstrap.js"></script>

        <script language="JavaScript" src="js/pages/root/RootPage.js"></script>
        <script language="JavaScript" src="js/pages/root/ModelPreviewPanel.js"></script>
        <script language="JavaScript" src="js/pages/root/DirectoryStructure.js"></script>
        <script language="JavaScript" src="js/pages/root/RootPageMenu.js"></script>
        <script language="JavaScript" src="js/pages/root/RootPagePreviewWindow.js"></script>
        <script language="JavaScript" src="js/pages/root/RootPageRightsPanel.js"></script>
        <script language="JavaScript" src="js/pages/root/RootPageRightAdditionWindow.js"></script>
        <script language="JavaScript" src="js/pages/root/TreeView.js"></script>
        <script language="JavaScript" src="js/pages/root/ISConnectionDialog.js"></script>
        <script language="JavaScript" src="js/util.js"></script>
    </head>

    <body>

        <script language="JavaScript">
            var lastTime = null;

            window.onload = function() {
                lastTime = new Date().getTime() / 1000;

                setTimeout(mayReload, 100000);
            }
            
            var rootPage;
            function mayReload() {
                var newTime = new Date().getTime() / 1000;
                if (newTime - lastTime > 300)
                    window.location.reload();

                setTimeout(mayReload, 100000);
                rootPage.saveCurrentFolder();
            }

            document.body.onclick = function() {
                lastTime = new Date().getTime() / 1000;
            }
            
            Ext.onReady(function() {
                rootPage = new RootPage( );
                rootPage.create(document.body);
            });

            window.onbeforeunload = function() {
                rootPage.saveCurrentFolder();
            }
        </script>
    </body>
</html>
